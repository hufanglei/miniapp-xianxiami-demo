{"version":3,"file":"classlist.js","sources":["pages/classlist/classlist.vue","../../../../../soft/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NsaXN0L2NsYXNzbGlzdC52dWU"],"sourcesContent":["<template>\n\t<view class=\"classlist\">\n\t\t\n\t\t<view class=\"loadingLayout\" v-if=\"!classList.length && !noData\">\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\n\t\t</view>\n\t\t\n\t\t<view class=\"content\">\n\t\t\t<navigator :url=\"'/pages/preview/preview?id='+item._id\" class=\"item\" \n\t\t\tv-for=\"item in classList\"\n\t\t\t:key=\"item._id\"\n\t\t\t>\t\t\t\n\t\t\t\t<image :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\n\t\t\t</navigator>\n\t\t</view>\n\t\t\n\t\t<view class=\"loadingLayout\" v-if=\"classList.length || noData\">\n\t\t\t<uni-load-more :status=\"noData?'noMore':'loading'\"></uni-load-more>\n\t\t</view>\n\t\t\n\t\t<view class=\"safe-area-inset-bottom\"></view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport {onLoad,onUnload,onReachBottom,onShareAppMessage,onShareTimeline} from \"@dcloudio/uni-app\"\n\nimport {apiGetClassList,apiGetHistoryList} from \"@/api/apis.js\"\nimport {gotoHome} from \"@/utils/common.js\"\n//分类列表数据\nconst classList = ref([]);\nconst noData = ref(false)\n\n//定义data参数\nconst queryParams = {\n\tpageNum:1,\n\tpageSize:12\n}\nlet pageName;\n\nonLoad((e)=>{\t\n\tlet {id=null,name=null,type=null} = e;\n\tif(type) queryParams.type = type;\n\tif(id) queryParams.classid = id;\t\n\t\n\tpageName = name\t\n\t//修改导航标题\n\tuni.setNavigationBarTitle({\n\t\ttitle:name\n\t})\n\t//执行获取分类列表方法\n\tgetClassList();\n})\n\nonReachBottom(()=>{\n\tif(noData.value) return;\n\tqueryParams.pageNum++;\n\tgetClassList();\n})\n\n//获取分类列表网络数据\nconst getClassList = async ()=>{\n\tlet res;\n\tif(queryParams.classid) res = await apiGetClassList(queryParams);\n\tif(queryParams.type) res = await apiGetHistoryList(queryParams);\n\t\n\tclassList.value = [...classList.value , ...res.data];\n\tif(queryParams.pageSize > res.data.length) noData.value = true; \n\tuni.setStorageSync(\"storgClassList\",classList.value);\t\n\tconsole.log(classList.value);\t\n}\n\n\n//分享给好友\nonShareAppMessage((e)=>{\n\treturn {\n\t\ttitle:\"咸虾米壁纸-\"+pageName,\n\t\tpath:\"/pages/classlist/classlist?id=\"+queryParams.classid+\"&name=\"+pageName\n\t}\n})\n\n\n//分享朋友圈\nonShareTimeline(()=>{\n\treturn {\n\t\ttitle:\"咸虾米壁纸-\"+pageName,\n\t\tquery:\"id=\"+queryParams.classid+\"&name=\"+pageName\n\t}\n})\n\nonUnload(()=>{\n\tuni.removeStorageSync(\"storgClassList\")\n})\n\n</script>\n\n<style lang=\"scss\" scoped>\n.classlist{\n\t.content{\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(3,1fr);\n\t\tgap:5rpx;\n\t\tpadding:5rpx;\n\t\t.item{\n\t\t\theight: 440rpx;\n\t\t\timage{\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from 'D:/idea-workspace/demo/wxapp-demos/my-univue3/my-wallpaper-kt/pages/classlist/classlist.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","onReachBottom","apiGetClassList","apiGetHistoryList","onShareAppMessage","onShareTimeline","onUnload"],"mappings":";;;;;;;;;;;;;;AA+BA,UAAA,YAAAA,cAAAA,IAAA,CAAA,CAAA;AACA,UAAA,SAAAA,cAAA,IAAA,KAAA;AAGA,UAAA,cAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,IACA;AACA,QAAA;AAEAC,kBAAA,OAAA,CAAA,MAAA;AACA,UAAA,EAAA,KAAA,MAAA,OAAA,MAAA,OAAA,KAAA,IAAA;AACA,UAAA;AAAA,oBAAA,OAAA;AACA,UAAA;AAAA,oBAAA,UAAA;AAEA,iBAAA;AAEAC,oBAAAA,MAAA,sBAAA;AAAA,QACA,OAAA;AAAA,MACA,CAAA;AAEA;IACA,CAAA;AAEAC,kBAAAA,cAAA,MAAA;AACA,UAAA,OAAA;AAAA;AACA,kBAAA;AACA;IACA,CAAA;AAGA,UAAA,eAAA,YAAA;AACA,UAAA;AACA,UAAA,YAAA;AAAA,cAAA,MAAAC,SAAA,gBAAA,WAAA;AACA,UAAA,YAAA;AAAA,cAAA,MAAAC,SAAA,kBAAA,WAAA;AAEA,gBAAA,QAAA,CAAA,GAAA,UAAA,OAAA,GAAA,IAAA,IAAA;AACA,UAAA,YAAA,WAAA,IAAA,KAAA;AAAA,eAAA,QAAA;AACAH,oBAAAA,MAAA,eAAA,kBAAA,UAAA,KAAA;AACAA,oBAAA,MAAA,MAAA,OAAA,uCAAA,UAAA,KAAA;AAAA,IACA;AAIAI,kBAAA,kBAAA,CAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA,WAAA;AAAA,QACA,MAAA,mCAAA,YAAA,UAAA,WAAA;AAAA,MACA;AAAA,IACA,CAAA;AAIAC,kBAAAA,gBAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA,WAAA;AAAA,QACA,OAAA,QAAA,YAAA,UAAA,WAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAC,kBAAAA,SAAA,MAAA;AACAN,oBAAA,MAAA,kBAAA,gBAAA;AAAA,IACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5FA,GAAG,WAAW,eAAe;"}